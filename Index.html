<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Card√°pio Inteligente</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4CAF50">
    <style>
        :root { --primary: #4CAF50; --bg: #f4f4f9; --text: #333; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); margin: 0; padding: 10px; color: var(--text); }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 15px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        
        .nav-tabs { display: flex; gap: 5px; margin-bottom: 15px; background: #eee; padding: 5px; border-radius: 10px; }
        .tab { flex: 1; padding: 10px; text-align: center; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 13px; }
        .tab.active { background: var(--primary); color: white; }

        /* Estilo da Tabela */
        .table-wrapper { width: 100%; overflow-x: auto; margin-top: 10px; border-radius: 8px; border: 1px solid #ddd; }
        table { width: 100%; border-collapse: collapse; min-width: 800px; background: white; }
        th { background: var(--primary); color: white; padding: 12px; text-align: center; text-transform: uppercase; font-size: 0.9em; position: sticky; top: 0; }
        td { padding: 10px; border: 1px solid #eee; vertical-align: top; font-size: 0.85em; line-height: 1.4; }
        tr:nth-child(even) { background: #f9f9f9; }
        .refeicao-nome { font-weight: bold; color: var(--primary); margin-bottom: 4px; display: block; border-bottom: 1px solid #ddd; }
        
        /* Estilo do Card (Hoje) */
        .dia-hoje-card { border: 2px solid var(--primary); padding: 15px; border-radius: 10px; }
        .dia-hoje-card h2 { margin-top: 0; color: var(--primary); text-align: center; }
        .item-refeicao { margin-bottom: 15px; padding: 10px; background: #f9f9f9; border-radius: 5px; }
        
        button { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .footer-info { text-align: center; font-size: 0.75em; color: #999; margin-top: 15px; }
    </style>
</head>
<body>

<div class="container">
    <div class="nav-tabs">
        <div class="tab active" onclick="app.mudarAba('dia')">HOJE</div>
        <div class="tab" onclick="app.mudarAba('semana')">TABELA DA SEMANA</div>
        <div class="tab" onclick="app.mudarAba('compras')">COMPRAS</div>
    </div>

    <div id="conteudo-principal"></div>
    <div class="footer-info" id="status-plano"></div>
</div>

<script>
const app = {
    config: { totalSemanas: 12 },
    banco: {
        cafe: {
            bases: ["P√£o franc√™s","P√£o de forma","P√£o caseiro","Tapioca","Cuscuz","Bolo simples","Panqueca","Crepioca"],
            acompanhamentos: ["Manteiga","Margarina","Requeij√£o","Queijo mussarela","Ovo mexido","Presunto"],
            bebidas: ["Caf√©","Leite com achocolatado","Ch√°","Vitamina","Suco"]
        },
        almoco: {
            feijoes: ["Feij√£o carioca","Feij√£o preto","Feij√£o fradinho"],
            proteinas: ["Frango grelhado","Carne mo√≠da","Bife acebolado","Frango assado","Peixe frito"],
            acompanhamentos: ["Macarr√£o","Pur√™ de batata","Batata cozida","Mandioca","Creme de milho","Chuchu cozido"],
            sucos: ["Maracuj√°","Laranja","Abacaxi","Uva"]
        },
        jantar: {
            opcoes: ["Arroz com ovo mexido","Sopa de legumes","Macarr√£o com frango","Pizza","Tapioca recheada"],
            sucos: ["Laranja","Lim√£o","Caju"]
        },
        lanches: { frutas: ["Banana","Ma√ß√£","Pera","Uva"], tarde: ["Biscoito","Iogurte","Bolo"] }
    },

    escolher(lista) { return lista[Math.floor(Math.random() * lista.length)]; },

    gerarPlano() {
        let plano = [];
        for (let s = 0; s < this.config.totalSemanas; s++) {
            const diasNome = ["SEGUNDA","TER√áA","QUARTA","QUINTA","SEXTA","S√ÅBADO","DOMINGO"];
            let semana = {};
            diasNome.forEach(dia => {
                semana[dia] = {
                    cafe: `${this.escolher(this.banco.cafe.bases)} com ${this.escolher(this.banco.cafe.acompanhamentos)}<br>‚Ä¢ ${this.escolher(this.banco.cafe.bebidas)}<br>‚Ä¢ ${this.escolher(this.banco.lanches.frutas)}`,
                    lancheM: this.escolher(this.banco.lanches.frutas),
                    almoco: `Arroz branco<br>‚Ä¢ ${this.escolher(this.banco.almoco.feijoes)}<br>‚Ä¢ ${this.escolher(this.banco.almoco.proteinas)}<br>‚Ä¢ ${this.escolher(this.banco.almoco.acompanhamentos)}<br>‚Ä¢ Suco de ${this.escolher(this.banco.almoco.sucos)}`,
                    lancheT: this.escolher(this.banco.lanches.tarde),
                    jantar: `${this.escolher(this.banco.jantar.opcoes)}<br>‚Ä¢ Suco de ${this.escolher(this.banco.jantar.sucos)}`
                };
            });
            plano.push(semana);
        }
        localStorage.setItem("plano", JSON.stringify(plano));
        localStorage.setItem("diaAtual", "0");
    },

    iniciar() {
        if (!localStorage.getItem("plano")) this.gerarPlano();
        this.mudarAba('dia');
    },

    mudarAba(aba) {
        document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.innerText.toLowerCase().includes(aba)));
        const container = document.getElementById("conteudo-principal");
        const plano = JSON.parse(localStorage.getItem("plano"));
        const diaIdx = parseInt(localStorage.getItem("diaAtual"));
        const semIdx = Math.floor(diaIdx / 7);
        const semana = plano[semIdx];

        if (aba === 'dia') {
            this.renderHoje(container, semana, diaIdx);
        } else if (aba === 'semana') {
            this.renderTabela(container, semana);
        } else {
            container.innerHTML = "<h2>Lista de Compras</h2><p>Baseado na semana atual.</p>";
        }
    },

    renderHoje(container, semana, idx) {
        const diaNome = Object.keys(semana)[idx % 7];
        const d = semana[diaNome];
        container.innerHTML = `
            <div class="dia-hoje-card">
                <h2>${diaNome}</h2>
                <div class="item-refeicao"><strong>‚òï Caf√©:</strong><br>${d.cafe}</div>
                <div class="item-refeicao"><strong>üçé Lanche:</strong><br>${d.lancheM}</div>
                <div class="item-refeicao"><strong>üçõ Almo√ßo:</strong><br>${d.almoco}</div>
                <div class="item-refeicao"><strong>üç™ Tarde:</strong><br>${d.lancheT}</div>
                <div class="item-refeicao"><strong>üåô Jantar:</strong><br>${d.jantar}</div>
                <button onclick="app.proximoDia()">Concluir e Avan√ßar</button>
            </div>`;
    },

    renderTabela(container, semana) {
        let html = `<h1>Card√°pio da Semana</h1><div class="table-wrapper"><table><tr>`;
        const dias = Object.keys(semana);
        dias.forEach(d => html += `<th>${d}</th>`);
        html += `</tr><tr>`;
        
        const categorias = [
            { label: "Caf√© da Manh√£", key: "cafe" },
            { label: "Lanche Manh√£", key: "lancheM" },
            { label: "Almo√ßo", key: "almoco" },
            { label: "Lanche Tarde", key: "lancheT" },
            { label: "Jantar", key: "jantar" }
        ];

        categorias.forEach(cat => {
            html += `<tr>`;
            dias.forEach(dia => {
                html += `<td><span class="refeicao-nome">${cat.label}</span>${semana[dia][cat.key]}</td>`;
            });
            html += `</tr>`;
        });

        html += `</table></div><p style="font-size: 0.8em; color: #666; margin-top: 10px;">‚Üê Deslize para os lados para ver todos os dias ‚Üí</p>`;
        container.innerHTML = html;
    },

    proximoDia() {
        let dia = parseInt(localStorage.getItem("diaAtual")) + 1;
        localStorage.setItem("diaAtual", dia);
        this.mudarAba('dia');
        window.scrollTo(0,0);
    }
};
app.iniciar();
</script>
</body>
</html>
